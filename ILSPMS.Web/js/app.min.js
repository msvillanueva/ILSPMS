(function(){"use strict";angular.module("common.core",["ngRoute","ngCookies","base64","angularFileUpload","angularValidator","angucomplete-alt"])})(),function(){"use strict";angular.module("common.ui",["ui.bootstrap","chieffancypants.loadingBar","ngAnimate","cambria","smart-table","ngclipboard","ngMaterial"])}(),function(n){"use strict";function t(n,t,i,r,u){function e(t,r,u,e){return n.get(t,r).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function o(t,r,u,e){return n.get(t,{ignoreLoadingBar:!0}).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function s(t,r,u,e){return n.post(t,r).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function h(t,r,u,e){return n.post(t,r,{ignoreLoadingBar:!0}).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function f(){r.previousState=t.path();membershipService.removeCredentials();u(function(){window.location.href="login.html"},3e3)}return{get:e,post:s,silentGet:o,silentPost:h}}n.factory("apiService",t);t.$inject=["$http","$location","notificationService","$rootScope","$interval"]}(angular.module("common.core")),function(n){"use strict";function t(n,t,i,r,u){function f(t,i,f){for(var o,e=0;e<t.length;e++)o=t[e],function(t){n.upload[t]=r.upload({url:"api/projectmovements/image/upload?id="+i,method:"POST",file:o}).progress(function(){}).success(function(){u.displaySuccess("Your attachment file has been uploaded successfully");f&&f()}).error(function(n){u.displayError(n.Message)})}(e)}n.upload=[];return{uploadFile:f}}n.factory("fileUploadService",t);t.$inject=["$rootScope","$http","$timeout","$upload","notificationService"]}(angular.module("common.core")),function(n){"use strict";function t(n,t,i,r,u,f){function e(n,t){i.post("/api/account/authenticate",n).success(function(n){t(n)})}function o(n,t,e){var o=r.encode(n.username+":"+n.password);f.repository={loggedUser:{username:n.username,authdata:o,role:t,id:e,impersonating:{},isImpersonated:!1}};i.defaults.headers.common.Authorization="Basic "+o;u.put("ilsPMSrepo",f.repository)}function s(){f.repository={};u.remove("ilsPMSrepo");i.defaults.headers.common.Authorization="";i.defaults.headers.common.Roles=""}function h(){return f.repository!=null&&f.repository.loggedUser!=null}function c(n){return r.encode(n)}return{login:e,saveCredentials:o,removeCredentials:s,isUserLoggedIn:h,encStr:c}}n.factory("membershipService",t);t.$inject=["apiService","notificationService","$http","$base64","$cookieStore","$rootScope"]}(angular.module("common.core")),function(n){"use strict";function t(){function t(n){toastr.success(n)}function n(n){Array.isArray(n)?n.forEach(function(n){toastr.error(n)}):toastr.error(n)}function i(n){toastr.warning(n)}function r(n){toastr.info(n)}function u(t){n(t.data)}toastr.options={debug:!1,positionClass:"toast-bottom-left",onclick:null,fadeIn:300,fadeOut:1e3,timeOut:7e3,extendedTimeOut:300,closeButton:!0,newestOnTop:!1,progressBar:!0,preventDuplicates:!1,showEasing:"swing",hideEasing:"linear"};return{displaySuccess:t,displayError:n,displayWarning:i,displayInfo:r,responseFailed:u}}n.factory("notificationService",t)}(angular.module("common.core")),function(){"use strict";function t(t){t.when("/",{title:"Dashboard",templateUrl:"js/app/dashboard/dashboard.html",controller:"dashboardCtrl",menu:"#menuDashboard"}).when("/profile",{title:"Profile",templateUrl:"js/app/profile/profile.html",controller:"profileCtrl",menu:"#menuDashboard"}).when("/change-password",{title:"Change password",templateUrl:"js/app/profile/password.html",controller:"passwordCtrl",menu:"#menuDashboard"}).when("/users",{title:"Users Management",templateUrl:"js/app/user/users.html",controller:"usersCtrl",menu:"#menuUsers",resolve:n}).when("/divisions",{title:"Divisions Management",templateUrl:"js/app/division/divisions.html",controller:"divisionsCtrl",menu:"#menuUsers",resolve:n}).when("/projects",{title:"Projects Management",templateUrl:"js/app/project/projects.html",controller:"projectsCtrl",menu:"#menuProjects",resolve:n}).when("/my-projects",{title:"My Projects",templateUrl:"js/app/myproject/myProjects.html",controller:"myProjectsCtrl",menu:"#menuMyProjects",resolve:u}).otherwise({redirectTo:"/"})}function i(n,t,i,r,u,f){n.repository=i.get("ilsPMSrepo")||{};u.isUserLoggedIn()||(window.location.href="login.html");n.repository.loggedUser&&(r.defaults.headers.common.Authorization=n.repository.loggedUser.authdata,r.defaults.headers.common.Roles=n.repository.loggedUser.role,n.repository.loggedUser.isImpersonated&&(r.defaults.headers.common.ImpersonatedClientID=n.repository.loggedUser.id));n.$on("$routeChangeSuccess",function(){var t,i,n;document.title="PMS | "+f.current.title;t=document.getElementsByClassName("sub-logo")[0];t&&(document.getElementsByClassName("sub-logo")[0].innerHTML=" | "+f.current.title);i=document.getElementsByClassName("menu-item");angular.forEach(i,function(n){angular.element(n).removeClass("active")});n=angular.element(document.querySelector(f.current.menu));n&&n.context&&n.context.nodeName=="LI"&&n.addClass("active")});$(document).ready(function(){$(".fancybox").fancybox({openEffect:"none",closeEffect:"none"});$(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}});$("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active")})})}function r(n,t,i){n.isUserLoggedIn()||(t.previousState=i.path(),window.location.href="/")}function n(n,t,i,r){var u=r.defer();if(t.repository.loggedUser.role!=1)return u.promise}function u(n,t,i,r){var u=r.defer();if(t.repository.loggedUser.role==1)return u.promise}angular.module("ilsApp",["common.core","common.ui"]).config(t).run(i);t.$inject=["$routeProvider","$locationProvider"];i.$inject=["$rootScope","$location","$cookieStore","$http","membershipService","$route"];r.$inject=["membershipService","$rootScope","$location"]}(),function(n){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"js/app/_layout/addButton.html",scope:{label:"@",create:"&"}}}n.directive("addButton",t)}(angular.module("ilsApp")),function(n){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"js/app/_layout/searchBar.html"}}n.directive("searchBar",t)}(angular.module("ilsApp")),function(n){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"js/app/_layout/sideBar.html"}}n.directive("sideBar",t)}(angular.module("ilsApp")),function(n){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"/js/app/_layout/topBar.html"}}n.directive("topBar",t)}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r){function f(){n.userData.isUserLoggedIn=i.isUserLoggedIn();n.userData.isUserLoggedIn?(n.username=r.repository.loggedUser.username,n.role=r.repository.loggedUser.role,n.userData.id=r.repository.loggedUser.id,n.isAdmin=r.repository.loggedUser.role==1,n.isPM=r.repository.loggedUser.role==2,n.isPM=r.repository.loggedUser.role==3):u()}function u(){i.removeCredentials();window.location.href="login.html"}function e(n){return new Date(n)}function o(n){isNaN(String.fromCharCode(n.keyCode))&&n.preventDefault()}n.userData={};n.UserEntity={};n.Alerts=[];n.itemsByPage=10;n.role=0;n.username="";n.isAdmin=!1;n.isPM=!1;n.isDiv=!1;n.year=(new Date).getFullYear();n.displayUserInfo=f;n.logout=u;n.formatDate=e;n.filterValue=o;n.displayUserInfo()}n.controller("rootCtrl",t);t.$inject=["$scope","$location","membershipService","$rootScope","apiService","$interval","notificationService"]}(angular.module("ilsApp")),function(n){"use strict";function t(){}n.controller("dashboardCtrl",t);t.$inject=["$scope"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){n.filter="";e()}function e(){n.loadingData=!0;var t={params:{filter:n.filter}};i.get("/api/users/",t,o,r.responseFailed)}function o(t){n.loadingData=!1;n.filter&&n.filter.length&&r.displayInfo(t.data.items.length+(t.data.items.length>1?" records found":" record found"));n.tableRowCollection=t.data.items;n.users=[].concat(n.tableRowCollection)}function s(t,f){u.cConfirm("Archive this user account?","CONFIRM ACTION",function(u){u&&(n.users.splice(t,1),i.post("/api/users/remove/",f,function(n){n.data.success?r.displaySuccess(f.FullName+" was removed from the list."):r.displayError(n.data.message)},r.responseFailed))})}function h(n,t){n.IsLocked=t;i.post("/api/users/lockunlock/",n,function(i){i.data.success?r.displaySuccess(n.FullName+"'s account is now "+(t?"locked.":"unlocked.")):r.displayError(i.data.message)},r.responseFailed)}function c(i){n.viewModel=i?angular.copy(i):{ID:0,RoleID:n.roles[1].ID};t.open({templateUrl:"js/app/user/userViewModal.html",controller:"userViewModalCtrl",scope:n,backdrop:"static",keyboard:!1}).result.then(function(){f()},function(){})}function l(){i.get("/api/divisions/",null,function(t){n.divisions=t.data.items},r.responseFailed);i.get("/api/roles/",null,function(t){n.roles=t.data.items},r.responseFailed);n.search()}n.pageClass="page-users";n.loadingData=!0;n.page=0;n.pagesCount=0;n.users=[];n.tableRowCollection=[];n.roles=[];n.divisions=[];n.search=e;n.clearSearch=f;n.archive=s;n.toggleLock=h;n.create=c;l()}n.controller("usersCtrl",t);t.$inject=["$scope","$uibModal","apiService","notificationService","cambria"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){var t="";t=n.viewModel.ID>0?"/api/users/edit/":"/api/users/new/";n.dataLoading=!0;r.post(t,n.viewModel,e,u.responseFailed)}function e(i){n.dataLoading=!1;i.data.success?(n.viewModel.ID==0?(u.displaySuccess("New user has been added successfully."),n.users.push(angular.copy(i.data.item)),n.viewModel={}):(u.displaySuccess("User account has been updated successfully."),o(i.data.item)),t.dismiss()):u.displayError(i.data.message)}function o(t){angular.forEach(n.users,function(i){i.ID==n.viewModel.ID&&(i.FirstName=t.FirstName,i.LastName=t.LastName,i.FullName=t.FullName,i.Email=t.Email,i.DivisionName=t.DivisionName,i.RoleName=t.RoleName,i.RoleID=t.RoleID,i.DivisionID=t.DivisionID)});n.viewModel={}}function s(){n.isEnabled=!1;t.dismiss()}n.close=s;n.save=f}n.controller("userViewModalCtrl",t);t.$inject=["$scope","$uibModalInstance","$timeout","apiService","notificationService"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){n.filter="";e()}function e(){n.loadingData=!0;i.get("/api/divisions/",null,o,r.responseFailed)}function o(t){n.loadingData=!1;n.filter&&n.filter.length&&r.displayInfo(t.data.items.length+(t.data.items.length>1?" records found":" record found"));n.tableRowCollection=t.data.items;n.divisions=[].concat(n.tableRowCollection)}function s(t,f){u.cConfirm("Archive this division?","CONFIRM ACTION",function(u){u&&(n.divisions.splice(t,1),i.post("/api/divisions/remove/",f,function(n){n.data.success?r.displaySuccess(f.Name+" was removed from the list."):r.displayError(n.data.message)},r.responseFailed))})}function h(i){n.viewModel=i?angular.copy(i):{ID:0};t.open({templateUrl:"js/app/division/divisionViewModal.html",controller:"divisionViewModalCtrl",scope:n,backdrop:"static",keyboard:!1}).result.then(function(){f()},function(){})}n.pageClass="page-divisions";n.loadingData=!0;n.page=0;n.pagesCount=0;n.divisions=[];n.tableRowCollection=[];n.search=e;n.clearSearch=f;n.archive=s;n.create=h;n.search()}n.controller("divisionsCtrl",t);t.$inject=["$scope","$uibModal","apiService","notificationService","cambria"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){n.dataLoading=!0;r.post("/api/divisions/update/",n.viewModel,e,u.responseFailed)}function e(i){n.dataLoading=!1;i.data.success?(n.viewModel.ID==0?(u.displaySuccess("New division has been added successfully."),n.divisions.push(angular.copy(i.data.item))):(u.displaySuccess("Division has been updated successfully."),o()),t.dismiss()):u.displayError(i.data.message)}function o(){angular.forEach(n.divisions,function(t){t.ID==n.viewModel.ID&&(t.Name=n.viewModel.Name)})}function s(){n.isEnabled=!1;t.dismiss()}n.close=s;n.save=f}n.controller("divisionViewModalCtrl",t);t.$inject=["$scope","$uibModalInstance","$timeout","apiService","notificationService"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){n.filter="";e()}function e(){n.loadingData=!0;var t={params:{filter:n.filter,all:n.all,divisionID:n.divisionID}};i.get("/api/projects/",t,o,r.responseFailed)}function o(t){n.loadingData=!1;n.filter&&n.filter.length&&r.displayInfo(t.data.items.length+(t.data.items.length>1?" records found":" record found"));n.tableRowCollection=t.data.items;n.projects=[].concat(n.tableRowCollection)}function s(t,f){u.cConfirm("Archive this project?","CONFIRM ACTION",function(u){u&&(n.projects.splice(t,1),i.post("/api/projects/remove/",f,function(n){n.data.success?r.displaySuccess(f.Name+" was removed from the list."):r.displayError(n.data.message)},r.responseFailed))})}function h(i){n.viewModel=i?angular.copy(i):{ID:0};t.open({templateUrl:"js/app/project/projectViewModal.html",controller:"projectViewModalCtrl",scope:n,backdrop:"static",keyboard:!1}).result.then(function(){f()},function(){})}function c(){i.get("/api/divisions/",null,function(t){n.divisions=t.data.items},r.responseFailed);i.get("/api/users/pms",null,function(t){n.pms=t.data.items},r.responseFailed);n.search()}n.pageClass="page-projects";n.loadingData=!0;n.page=0;n.pagesCount=0;n.projects=[];n.tableRowCollection=[];n.pms=[];n.divisions=[];n.all=!1;n.divisionID="0";n.search=e;n.clearSearch=f;n.archive=s;n.create=h;c()}n.controller("projectsCtrl",t);t.$inject=["$scope","$uibModal","apiService","notificationService","cambria"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){n.dataLoading=!0;r.post("/api/projects/update/",n.viewModel,e,u.responseFailed)}function e(i){n.dataLoading=!1;i.data.success?(console.log(i.data.item),n.viewModel.ID==0?(u.displaySuccess("New project has been added successfully."),n.projects.push(angular.copy(i.data.item)),n.viewModel={}):(u.displaySuccess("Project has been updated successfully."),o(i.data.item)),t.dismiss()):u.displayError(i.data.message)}function o(t){angular.forEach(n.projects,function(i){i.ID==n.viewModel.ID&&(i.Name=t.Name,i.DivisionName=t.DivisionName,i.ProjectManager=t.ProjectManager,i.Budget=t.Budget,i.Year=t.Year)});n.viewModel={}}function s(){n.isEnabled=!1;t.dismiss()}n.close=s;n.save=f}n.controller("projectViewModalCtrl",t);t.$inject=["$scope","$uibModalInstance","$timeout","apiService","notificationService"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r){function f(){n.filter="";u()}function u(){n.loadingData=!0;var t={params:{filter:n.filter,all:n.all,divisionID:null}};i.get("/api/projects/",t,e,r.responseFailed)}function e(t){n.loadingData=!1;n.filter&&n.filter.length&&r.displayInfo(t.data.items.length+(t.data.items.length>1?" records found":" record found"));n.projects=t.data.items}function o(n,t){t.Hovered=!0}function s(n,t){t.Hovered=!1}n.pageClass="page-myprojects";n.loadingData=!0;n.projects=[];n.tableRowCollection=[];n.search=u;n.clearSearch=f;n.popMenu=o;n.hideMenu=s;n.search()}n.controller("myProjectsCtrl",t);t.$inject=["$scope","$uibModal","apiService","notificationService","cambria"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r,u){function f(){n.dataLoading=!0;var u={};u.Current=r.encStr(n.viewModel.Current);u.New=r.encStr(n.viewModel.New);u.Confirm=r.encStr(n.viewModel.Confirm);t.post("/api/account/changepassword/",u,e,i.responseFailed)}function e(t){n.dataLoading=!1;t.data.success?u.cAlert("Password was updated. <br/> You will be redirected to the login screen","PASSWORD UPDATED",function(){r.removeCredentials();window.location.href="login.html"}):i.displayError(t.data.message)}n.pageClass="page-password";n.dataLoading=!1;n.viewModel={};n.save=f}n.controller("passwordCtrl",t);t.$inject=["$scope","apiService","notificationService","membershipService","cambria"]}(angular.module("ilsApp")),function(n){"use strict";function t(n,t,i,r){function u(){n.dataLoading=!0;i.post("/api/account/update/",n.viewModel,f,r.responseFailed)}function f(t){n.dataLoading=!1;t.data.success?r.displaySuccess("Your profile has been updated successfully"):r.displayError(t.data.message)}function e(){i.get("/api/account",null,function(t){n.dataLoading=!1;n.viewModel=t.data.item;n.availableUsername=n.viewModel.Username!=""},r.responseFailed)}n.close=close;n.save=u;e()}n.controller("profileCtrl",t);t.$inject=["$scope","$timeout","apiService","notificationService"]}(angular.module("ilsApp"));