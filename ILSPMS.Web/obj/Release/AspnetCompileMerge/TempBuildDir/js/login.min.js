(function(){"use strict";angular.module("common.core",["ngRoute","ngCookies","base64","angularFileUpload","angularValidator","angucomplete-alt"])})(),function(){"use strict";angular.module("common.ui",["ui.bootstrap","chieffancypants.loadingBar","ngAnimate","cambria","smart-table","ngclipboard","ngMaterial","chart.js"])}(),function(n){"use strict";function t(n,t,i,r,u){function e(t,r,u,e){return n.get(t,r).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function o(t,r,u,e){return n.get(t,{ignoreLoadingBar:!0}).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function s(t,r,u,e){return n.post(t,r).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function h(t,r,u,e){return n.post(t,r,{ignoreLoadingBar:!0}).then(function(n){u(n)},function(n){n.status=="401"?(i.displayError("Authentication required."),f()):e!=null&&e(n)})}function f(){r.previousState=t.path();membershipService.removeCredentials();u(function(){window.location.href="login.html"},3e3)}return{get:e,post:s,silentGet:o,silentPost:h}}n.factory("apiService",t);t.$inject=["$http","$location","notificationService","$rootScope","$interval"]}(angular.module("common.core")),function(n){"use strict";function t(n,t,i,r,u){function f(t,i,f){for(var o,e=0;e<t.length;e++)o=t[e],function(t){n.upload[t]=r.upload({url:"api/files/upload?id="+i,method:"POST",file:o}).progress(function(){}).success(function(){u.displaySuccess("Your attachment file has been uploaded successfully");f&&f()}).error(function(n){u.displayError(n.Message)})}(e)}n.upload=[];return{uploadFile:f}}n.factory("fileUploadService",t);t.$inject=["$rootScope","$http","$timeout","$upload","notificationService"]}(angular.module("common.core")),function(n){"use strict";function t(n,t,i,r,u,f){function e(n,t){i.post("/api/account/authenticate",n).success(function(n){t(n)})}function o(n,t,e){var o=r.encode(n.username+":"+n.password);f.repository={loggedUser:{username:n.username,authdata:o,role:t,id:e,impersonating:{},isImpersonated:!1}};i.defaults.headers.common.Authorization="Basic "+o;u.put("ilsPMSrepo",f.repository)}function s(){f.repository={};u.remove("ilsPMSrepo");i.defaults.headers.common.Authorization="";i.defaults.headers.common.Roles=""}function h(){return f.repository!=null&&f.repository.loggedUser!=null}function c(n){return r.encode(n)}return{login:e,saveCredentials:o,removeCredentials:s,isUserLoggedIn:h,encStr:c}}n.factory("membershipService",t);t.$inject=["apiService","notificationService","$http","$base64","$cookieStore","$rootScope"]}(angular.module("common.core")),function(n){"use strict";function t(){function t(n){toastr.success(n)}function n(n){Array.isArray(n)?n.forEach(function(n){toastr.error(n)}):toastr.error(n)}function i(n){toastr.warning(n)}function r(n){toastr.info(n)}function u(t){n(t.data)}toastr.options={debug:!1,positionClass:"toast-bottom-left",onclick:null,fadeIn:300,fadeOut:1e3,timeOut:7e3,extendedTimeOut:300,closeButton:!0,newestOnTop:!1,progressBar:!0,preventDuplicates:!1,showEasing:"swing",hideEasing:"linear"};return{displaySuccess:t,displayError:n,displayWarning:i,displayInfo:r,responseFailed:u}}n.factory("notificationService",t)}(angular.module("common.core")),function(){"use strict";function n(n){n.when("/",{title:"Login",templateUrl:"js/app/login/loginForm.html",controller:"loginFormCtrl"}).when("/forgotPassword",{title:"Forgot Password",templateUrl:"js/app/login/forgotPassword.html",controller:"forgotPasswordCtrl"}).otherwise({redirectTo:"/"})}function t(n,t,i,r,u){n.repository=i.get("ilsPMSrepo")||{};u.isUserLoggedIn()&&n.repository.loggedUser?(r.defaults.headers.common.Authorization=n.repository.loggedUser.authdata,r.defaults.headers.common.Roles=n.repository.loggedUser.role,window.location.href="index.html"):u.removeCredentials()}angular.module("loginApp",["base64","ngCookies","common.core","common.ui","ngRoute"]).config(n).run(t);n.$inject=["$routeProvider","$locationProvider"];t.$inject=["$rootScope","$location","$cookieStore","$http","membershipService","$route"]}(),function(n){"use strict";n.controller("forgotPasswordCtrl",["$scope","$rootScope","$location","membershipService","notificationService","apiService",function(n,t,i,r,u,f){n.user={};n.showCancel=!0;n.requestPassword=function(){function t(t){n.dataLoading=!1;n.dataLoading=!1;n.showCancel=!0;t.data.success?(u.displaySuccess("Your new password has sent to your email."),i.path("/")):u.displayError(t.data.message)}function r(){u.displayError("An error occurs while processing your request")}n.dataLoading=!0;n.showCancel=!1;f.post("/api/account/forgot/",n.user,t,r)}}])}(angular.module("loginApp")),function(n){"use strict";n.controller("loginFormCtrl",["$scope","$rootScope","$location","membershipService","notificationService",function(n,t,i,r,u){n.user={};n.login=function(){r.removeCredentials();n.dataLoading=!0;r.login(n.user,function(t){t.success?(r.saveCredentials(n.user,t.role,t.id),window.location.href="index.html"):(u.displayError("Invalid Login"),n.user.password="",n.error=t.message,n.dataLoading=!1)})}}])}(angular.module("loginApp"));